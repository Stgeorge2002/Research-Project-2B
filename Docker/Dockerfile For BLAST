# Use ncbi/blast as the base image
FROM ncbi/blast:latest

# Switch to root user to install packages
USER root

# Install necessary system utilities and Entrez Direct
RUN apt-get update && apt-get install -y \
    procps \
    wget \
    curl \
    unzip \
    && rm -rf /var/lib/apt/lists/* \
    && wget -q ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz \
    && tar -xzf edirect.tar.gz \
    && rm edirect.tar.gz \
    && mv edirect /opt/ \
    && ln -s /opt/edirect/* /usr/local/bin/

# Set the working directory
WORKDIR /data

# Switch back to the default user (if there is one, otherwise comment this line out)
USER blast

# Add Entrez Direct to PATH
ENV PATH="/opt/edirect:${PATH}"

# Use CMD instead of ENTRYPOINT
CMD ["/bin/bash"]